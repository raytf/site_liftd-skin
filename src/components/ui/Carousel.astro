---
import type { Image } from '~/types';
import type { CallToAction } from '~/types';
import ImageCard from './ImageCard.astro';

interface Props {
  slides?: Array<{
    id?: string;
    title?: string;
    backgroundImage?: Image;
    description?: string;
    benefits?: string[];
    action?: CallToAction;
    tagline?: string;
  }>;
}

const { slides = [] } = Astro.props;
---

<ul class="carousel">
  {slides.map((slide) => <ImageCard as="li" containerClass="slide" {...slide} />)}
</ul>

<style>
  .carousel {
    anchor-name: --carousel;
    display: grid;
    grid-auto-flow: column;
    grid-auto-columns: 100%;
    gap: 2rem;

    @media (min-width: 768px) {
      grid-auto-columns: calc(50% - 2rem);
    }

    scroll-behavior: smooth;
    @media (prefers-reduced-motion: reduce) {
      scroll-behavior: auto;
    }

    overflow-x: scroll;
    scroll-snap-type: x mandatory;

    scroll-marker-group: after;

    > li {
      scroll-snap-align: center;
    }
  }

  /* SCROLL MARKERS */

  .carousel::scroll-marker-group {
    display: flex;
    justify-content: center;
    gap: 1rem;
    height: 20px;
    margin-block-start: 1rem;
  }

  .carousel li.slide::scroll-marker {
    content: ' ';
    border: 2px solid CanvasText;
    border-radius: 100%;
    height: 20px;
    width: 20px;
  }

  .carousel li.slide::scroll-marker:hover,
  .carousel li.slide::scroll-marker:focus-visible {
    background: LinkText;
  }

  .carousel li.slide::scroll-marker:target-current {
    background: CanvasText;
  }

  /* SCROLL BUTTONS */

  .carousel::scroll-button(*) {
    position: absolute;
    position-anchor: --carousel;
    height: 50%;
    background: transparent;
    border: none;
  }

  /* .carousel::scroll-button(left) {
    content: '<';
    position-area: center left;
  }
  .carousel::scroll-button(right) {
    content: '>';
    position-area: center right;
  } */
</style>
